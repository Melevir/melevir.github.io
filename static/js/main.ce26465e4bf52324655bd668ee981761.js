var localstorageKeyName="studentPackMaterialsStat",getCurrentStat=function(){var a=localStorage.getItem(localstorageKeyName);if(a==undefined){return{}}else{return JSON.parse(a)}},updateItemState=function(a,e,c,d){var b=getCurrentStat();b[a]=b[a]||{};b[a][e]=b[a][e]||{};b[a][e][c]=b[a][e][c]||{};b[a][e][c]={state:d};localStorage.setItem(localstorageKeyName,JSON.stringify(b))},getItemStatus=function(b,a,d,c){b[a]=b[a]||{};b[a][d]=b[a][d]||{};b[a][d][c]=b[a][d][c]||{};var e=b[a][d][c];if(e!=undefined){return e.state}},redrawMaterialItem=function(f,b){var d=f.closest("ul").data("subtopicId").toString(),c=$(".topic_content").data("topicId").toString(),e=f.data("itemId").toString(),a=getItemStatus(b,c,d,e);if(a=="got_it"){f.addClass("success")}else{if(a=="visited"){f.append('<span class="got_it_btn">✓ я понял</span>')}}},updateMaterialsStatuses=function(){var d=$(".topic_content").find("ul"),a=getCurrentStat(),e,b,f,c;$.each(d,function(g,h){b=$(h);c=b.data("subtopicId");if(c!=undefined){$.each(b.find("li"),function(j,i){f=$(i);e=f.data("itemId").toString();redrawMaterialItem(f,a)})}})};$(".hider_btn").click(function(c){var a=$(c.target),b=a.closest(".hider").find(".hider_content");a.hide();b.fadeIn()});$("body").on("click",".got_it_btn",function(f){var b=$(f.target),a=b.closest("li"),g=a.data("itemId"),d=b.closest("ul").data("subtopicId"),c=$(".topic_content").data("topicId");updateItemState(c,d,g,"got_it");redrawMaterialItem($(a),getCurrentStat());b.fadeOut()});$(".topic_content li>a").click(function(f){var b=$(f.target),a=b.closest("li"),g=a.data("itemId"),d=b.closest("ul").data("subtopicId"),c=$(".topic_content").data("topicId");updateItemState(c,d,g,"visited");redrawMaterialItem($(a),getCurrentStat())});updateMaterialsStatuses();